---
draft: false
categories: []
toc: true
title: Python
tags: []
---

On this page, we provide concise information to get you up and running with Sentry's Python SDK, automatically reporting errors and exceptions in your application.

**Note:** If you don't already have an account and Sentry project established, head over to [sentry.io](https://sentry.io/signup/), then return to this page.

## Frameworks

<FrameworkGrid platform="python" />

## Install

Sentry captures data by using an SDK within your application’s runtime. Install our Python SDK using `pip`:

```bash
$ pip install --upgrade sentry-sdk
```

**NoteL** Our SDK provides support for Python 2.7 and 3.4 or later. [Integrations](#integrations) with specific frameworks (particularly asynchronous ones) may impose additional requirements.

<Alert level="info" title="Upgrading the SDK and want to understand what's new?"><markdown>

Have a look at the [Changelog](https://github.com/getsentry/sentry-python/releases).

</markdown></Alert>


### Migrating from Raven

If you are migrating from [raven-python](https://github.com/getsentry/raven-python), please review [our migration guide](/platforms/python/migration/) before continuing.

### Configure

Import and initialize the Sentry SDK early in your application’s setup:

```python
import sentry_sdk
sentry_sdk.init(dsn='___PUBLIC_DSN___')
```

Once this is done, all unhandled exceptions are automatically captured by Sentry.

**Important:** Note your DSN. The _DSN_ (Data Source Name) tells the SDK where to send events. If you forget it, view _Settings -> Projects -> Client Keys (DSN)_ in the Sentry web UI.

### Verify Setup

Verify your setup by intentionally sending an error that breaks your application. For example, in Python, capture an exception:

```python
sentry_sdk.capture_exception(Exception("This is an example of an error message."))
```

In Python you can either capture a caught exception or the one currently held in `sys.exc_info()` by not passing an argument:

```python
from sentry_sdk import capture_exception

try:
    a_potentially_failing_function()
except Exception as e:
    # Alternatively the argument can be omitted
    capture_exception(e)
```

Resolve the created error by logging in to Sentry, then opening your project. On the **Issue Details** page, scroll down to the Exception stack trace and view the error.

## Capture Errors

A few key terms to know as we proceed:

- An _event_ is one instance of sending data to Sentry. Generally, this data is an error or exception.
- An _issue_ is a grouping of similar events.
- The reporting of an event is called _capturing_.
  When an event is captured, it’s sent to Sentry.

Learn more about how to manually capture errors or enable message capture with Sentry's Python SDK in Capture Errors.

### Automatically Enrich Error Data

Events sent by the Python SDK to Sentry are enriched with data that helps identify the source of the event. Much of this data is sent automatically - including the error context and environment - as well as the trail of events that led up to the event, which we call breadcrumbs. You don't need to configure these, though you may modify them.

Learn more about the data sent to with events in Enrich Event Data.
<!-- TO DO: Add link to Enrich Event Data intro page for Python -->

### Set the Release Version

When you configure Sentry to include the version of your application, Sentry can tell you about regressions as well as detailed information about the suspect commit.

<!--TO DO: Add the equivalent of the JS `process.env.npm_package_version` for Python to capture release -->

After you inform Sentry of a new release, you will see information about it, such as new issues and regressions introduced in the release.

Learn more about what releases can do, including using a repository integration, creating the release and associated commits, and telling Sentry when you deploy a release in [our documentation for Releases](/product/releases/).

## Monitor Performance

Performance Monitoring helps you see everything from macro-level metrics to micro-level spans, and you’ll be able to cross-reference transactions with related issues, customize queries based on your personal needs, and substantially more.

To get started with performance monitoring using Sentry's Python SDK, first install `sentry_sdk`:

```python
import sentry_sdk
```

Next, initialize the integration in your call to `sentry_sdk.init`:

```python
sentry_sdk.init(
    "___PUBLIC_DSN___",
    traces_sample_rate = 1.0 # be sure to lower this in production to prevent quota issues
)
```

Performance data is transmitted using a new event type called "transactions", which you can learn about in [Distributed Tracing](/performance-monitoring/distributed-tracing/#traces-transactions-and-spans). **To capture transactions, you must install and configure your SDK to set the `traces_sample_rate` option to a nonzero value.** The example configuration above will transmit 100% of captured traces. Be sure to lower this value in production otherwise you could burn through your quota quickly.

Learn more about sampling in Using Your SDK to Filter Events
<!--TO DO: Add the link to the filtering info for Python -->

<!--TO DO: Add Next Steps and move this content into the appropriate pages-->

## Context

Sentry supports additional context with events. Often this context is shared
among any issue captured in its lifecycle, and includes the following
components:

**Structured Contexts**

: Structured contexts are typically set automatically.

[**User**](#capturing-the-user)

: Information about the current actor.

[**Tags**](#tagging-events)

: Key/value pairs which generate breakdown charts and search filters.

[**Level**](#setting-the-level)

: An event's severity.

[**Fingerprint**](#setting-the-fingerprint)

: A value used for grouping events into issues.

[**Unstructured Extra Data**](#extra-context)

: Arbitrary unstructured data which the Sentry SDK stores with an event sample.

<Alert level="warning" title="Context Size Limits"><markdown>

Sentry will try its best to accommodate the data you send it, but large context
payloads will be trimmed or may be truncated entirely. For more details see the
[data handling SDK documentation](https://develop.sentry.dev/sdk/data-handling/)

</markdown></Alert>



### Setting Context

In addition to the structured context that Sentry understands, you can send arbitrary key/value pairs of data which the Sentry SDK will store alongside the event. These are not indexed, and the Sentry SDK uses them to add additional information about what might be happening.

`.set_context()` will take an object as the second argument and place the object inside `contexts` in the event payload.

```python
from sentry_sdk import configure_scope

with configure_scope() as scope:
    scope.set_context("my_cool_data", {"foo": "bar"})
```

### Extra Context

`.set_extra()` is similar to `.set_context()`, however it doesn't have reserved keys.

```python
from sentry_sdk import configure_scope

with configure_scope() as scope:
    scope.set_extra("character_name", "Mighty Fighter")
```

### Unsetting Context

Context is held in the current scope and thus is cleared out at the end of each operation — request, etc. You can also append and pop your own scopes to apply context data to a specific code block or function. Typically, unsetting context happens within an integration. For more information, see our [Python integrations](#integrations).

There are two different scopes for unsetting context — a global scope which Sentry does not discard at the end of an operation, and a scope that can be created by the user.

```python
from sentry_sdk import configure_scope, push_scope, capture_exception

# This will be changed for all future events
with configure_scope() as scope:
    scope.user = some_user

with push_scope() as scope:
    # This will be changed only for the error caught inside and automatically discarded afterward
    scope.user = some_user
    capture_exception(...)
```

### Capturing the User

Sending users to Sentry will unlock many features, primarily the ability to
drill down into the number of users affecting an issue, as well as to get a
broader sense about the quality of the application.

```python
from sentry_sdk import configure_scope

with configure_scope() as scope:
    scope.user = {"email": "john.doe@example.com"}
```

Users consist of a few critical pieces of information which are used to
construct a unique identity in Sentry. Each of these is optional, but
one **must** be present for the Sentry SDK to capture the user:

`id`

: Your internal identifier for the user.

`username`

: The user's username. Generally used as a better label than the internal ID.

`email`

: An alternative, or addition, to a username. Sentry is aware of email addresses
  and can show things like Gravatars, unlock messaging capabilities, and more.

`ip_address`

: The IP address of the user. If the user is unauthenticated, providing the IP
  address will suggest that this is unique to that IP. If available, we will
  attempt to pull this from the HTTP request data.

Additionally, you can provide arbitrary key/value pairs beyond the reserved
names, and the Sentry SDK will store those with the user.


### Tagging Events

Tags are key/value pairs assigned to events that can be used for breaking down
issues or quick access to finding related events.

Most SDKs generally support configuring tags by configuring the scope:

```python
from sentry_sdk import configure_scope

with configure_scope() as scope:
    scope.set_tag("page_locale", "de-at")
```

For more information, see the [Tagging Events section](/enriching-error-data/additional-data/#tags) in Context.

### Setting the Level

You can set the severity of an event to one of five values: fatal, error, warning, info, and debug. error is the default, fatal is the most severe, and debug is the least severe.

```python
from sentry_sdk import configure_scope

with configure_scope() as scope:
    scope.level = 'warning'
```

### Setting the Fingerprint

Sentry uses a fingerprint to decide how to group errors into issues.

For some very advanced use cases, you can override the Sentry default grouping using the `fingerprint` attribute. In supported SDKs, this attribute can be passed with the event information and should be an array of strings.

If you wish to append information, thus making the grouping slightly less aggressive, you can do that as well by adding the special string `{{default}}` as one of the items.


For code samples, see the [Grouping & Fingerprints](/data-management/event-grouping/?platform=python#use-cases) page.

For more information, see [Aggregate Errors with Custom Fingerprints](https://blog.sentry.io/2018/01/18/setting-up-custom-fingerprints).

## Advanced Usage

### Advanced Configuration

The Sentry SDK sets the options when you first initialize the SDK.

```python
import sentry_sdk

sentry_sdk.init(
    '___PUBLIC_DSN___',
    max_breadcrumbs=50,
    debug=True,
)
```

For more information, see:

- [Sentry’s complete list of Common Options across SDKs](/error-reporting/configuration/)
- [Full documentation on Environments](/enriching-error-data/environments/)

### Breadcrumbs

Sentry will automatically record certain events, such as changes to the URL and XHR requests to provide context to an error.

You can manually add breadcrumbs on other events or disable breadcrumbs.

```python
from sentry_sdk import add_breadcrumb

add_breadcrumb(
    category='auth',
    message='Authenticated user %s' % user.email,
    level='info',
)
```

For more information, see:

- [Full documentation on Breadcrumbs](/enriching-error-data/breadcrumbs/)
- [Debug Issues Faster with Breadcrumbs](https://blog.sentry.io/2016/05/04/breadcrumbs).

### Filter Events & Custom Logic

Sentry exposes a beforeSend callback which can be used to filter out information or add additional context to the event object.

```python
import sentry_sdk

def strip_sensitive_data(event, hint):
    # modify event here
    return event

sentry_sdk.init(
    before_send=strip_sensitive_data
)
```

For more information, see:

- [Full documentation on Filtering Events](/error-reporting/configuration/filtering/)
- [Manage Your Flow of Errors Using Inbound Filters](https://blog.sentry.io/2017/11/27/setting-up-inbound-filters).

### Integrations

*Integrations* extend the functionality of the SDK for some common frameworks and libraries. Similar to plugins, they extend the functionality of the Sentry SDK. A call to `sentry_sdk.init` configures integrations. Unless you set `default_integrations` to `False`, Sentry automatically adds any default integration not in the list below.

#### Web Frameworks

- [Django](/platforms/python/django/)
- [Flask](/platforms/python/flask/)
- [Sanic](/platforms/python/sanic/)
- [Pyramid](/platforms/python/pyramid/)
- [AIOHTTP](/platforms/python/aiohttp/)
- [Tornado](/platforms/python/tornado/)
- [Bottle](/platforms/python/bottle/)
- [Tryton](/platforms/python/tryton/)
- [Falcon](/platforms/python/falcon/)
- [Generic WSGI](/platforms/python/wsgi/)
- [Generic ASGI](/platforms/python/asgi/)

#### Task Queues

- [Celery](/platforms/python/celery/)
- [RQ (Redis Queue)](/platforms/python/rq/)

#### Data
- [Apache Airflow](/platforms/python/airflow)
- [Apache Beam](/platforms/python/beam/)
- [PySpark](/platforms/python/pyspark/)

#### Serverless

- [AWS Lambda](/platforms/python/aws_lambda/)
- [GCP Functions](/platforms/python/gcp_functions/)
- [Azure Functions](/platforms/python/azure_functions/)
- [Serverless Decorator](/platforms/python/serverless/)

#### Other Integrations

- [Logging](/platforms/python/logging/)
- [GNU Backtrace](/platforms/python/gnu_backtrace/)
- [pure_eval](/platforms/python/pure_eval/)
- [Redis](/platforms/python/redis/)
- [SQLAlchemy](/platforms/python/sqlalchemy/)

### Default Integrations

System integrations are integrations enabled by default that integrate into the standard library or the interpreter itself. Sentry documents them so you can see what they do and that they can be disabled if they cause issues. To disable system integrations, set `default_integrations=False` when calling `init()`.

For more information, see full documentation on [Default Integrations](/platforms/python/default-integrations/).

## Hints

The Python SDK provides some common [hints](/error-reporting/configuration/filtering/#event-hints) for breadcrumbs and events.  These hints are passed as the `hint` parameter to `before_send` and `before_breadcrumb` (as well as event processors) as a dictionary.  More than one hint can be supplied, but this is rare.

`exc_info`

: If you set this hint, then it's an exc info tuple in the form `(exc_type, exc_value, tb)`.  This can be used to extract additional information from the original error object.

`log_record`

: This hint is passed to breadcrumbs and contains the log record that created it.  It can be used to extract additional information from the original `logging` log record that is not extracted by default. Likewise, it can be useful to discard uninteresting breadcrumbs.

`httplib_request`

: An `httplib` request object for breadcrumbs created from HTTP requests.

## Troubleshooting and Known Issues

The [Troubleshooting](/platforms/python/troubleshooting/) page provides advice
for solving known problems.
